<svg width="1400" height="900" viewBox="0 0 1400 900" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-labelledby="title desc">
  <title id="title">MicroClaw Architecture</title>
  <desc id="desc">MicroClaw architecture overview with channels, shared agent loop, memory, tools, scheduler, and observability.</desc>

  <defs>
    <linearGradient id="bg" x1="0" y1="0" x2="1400" y2="900" gradientUnits="userSpaceOnUse">
      <stop stop-color="#8B5CF6"/>
      <stop offset="0.46" stop-color="#3B82F6"/>
      <stop offset="1" stop-color="#06B6D4"/>
    </linearGradient>

    <linearGradient id="panel" x1="120" y1="90" x2="1280" y2="810" gradientUnits="userSpaceOnUse">
      <stop stop-color="#FFFFFF" stop-opacity="0.95"/>
      <stop offset="1" stop-color="#F0F9FF" stop-opacity="0.92"/>
    </linearGradient>

    <filter id="shadow" x="72" y="48" width="1256" height="804" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
      <feDropShadow dx="0" dy="14" stdDeviation="16" flood-color="#0F172A" flood-opacity="0.2"/>
    </filter>

    <marker id="arrow" markerWidth="8" markerHeight="8" refX="6" refY="4" orient="auto">
      <path d="M1 1L6 4L1 7" stroke="#0F172A" stroke-width="1.9" stroke-linecap="round" stroke-linejoin="round"/>
    </marker>
  </defs>

  <rect width="1400" height="900" rx="30" fill="url(#bg)"/>
  <circle cx="130" cy="110" r="56" fill="#FDE68A" fill-opacity="0.35"/>
  <circle cx="1270" cy="790" r="64" fill="#A7F3D0" fill-opacity="0.3"/>

  <g filter="url(#shadow)">
    <rect x="96" y="72" width="1208" height="760" rx="30" fill="url(#panel)"/>
  </g>

  <text x="140" y="132" fill="#0F172A" font-size="42" font-weight="700" font-family="Segoe UI, Arial, sans-serif">MicroClaw Architecture</text>
  <text x="140" y="168" fill="#475569" font-size="22" font-family="Segoe UI, Arial, sans-serif">Channel-agnostic runtime with a shared tool loop, persistent memory, and background automation.</text>

  <rect x="138" y="214" width="252" height="212" rx="24" fill="#DBEAFE"/>
  <text x="166" y="258" fill="#1E3A8A" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Channels</text>
  <text x="166" y="294" fill="#1D4ED8" font-size="21" font-family="Segoe UI, Arial, sans-serif">Telegram</text>
  <text x="166" y="326" fill="#1D4ED8" font-size="21" font-family="Segoe UI, Arial, sans-serif">Discord</text>
  <text x="166" y="358" fill="#1D4ED8" font-size="21" font-family="Segoe UI, Arial, sans-serif">Web (axum + SSE)</text>
  <text x="166" y="390" fill="#1D4ED8" font-size="21" font-family="Segoe UI, Arial, sans-serif">delivery + splitting</text>

  <rect x="420" y="214" width="330" height="212" rx="24" fill="#DCFCE7"/>
  <text x="450" y="258" fill="#166534" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Agent Runtime Core</text>
  <text x="450" y="294" fill="#15803D" font-size="20" font-family="Segoe UI, Arial, sans-serif">load session/history</text>
  <text x="450" y="326" fill="#15803D" font-size="20" font-family="Segoe UI, Arial, sans-serif">build prompt + memory context</text>
  <text x="450" y="358" fill="#15803D" font-size="20" font-family="Segoe UI, Arial, sans-serif">LLM call with tool schemas</text>
  <text x="450" y="390" fill="#15803D" font-size="20" font-family="Segoe UI, Arial, sans-serif">tool_use loop until end_turn</text>

  <rect x="780" y="214" width="244" height="212" rx="24" fill="#FCE7F3"/>
  <text x="812" y="258" fill="#9D174D" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">LLM Layer</text>
  <text x="812" y="294" fill="#BE185D" font-size="20" font-family="Segoe UI, Arial, sans-serif">Anthropic</text>
  <text x="812" y="326" fill="#BE185D" font-size="20" font-family="Segoe UI, Arial, sans-serif">OpenAI-compatible</text>
  <text x="812" y="358" fill="#BE185D" font-size="20" font-family="Segoe UI, Arial, sans-serif">stream + usage logging</text>

  <rect x="1052" y="214" width="212" height="212" rx="24" fill="#EDE9FE"/>
  <text x="1080" y="258" fill="#5B21B6" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Tools</text>
  <text x="1080" y="294" fill="#6D28D9" font-size="20" font-family="Segoe UI, Arial, sans-serif">bash / files</text>
  <text x="1080" y="326" fill="#6D28D9" font-size="20" font-family="Segoe UI, Arial, sans-serif">web / schedule</text>
  <text x="1080" y="358" fill="#6D28D9" font-size="20" font-family="Segoe UI, Arial, sans-serif">sub-agent / todo</text>
  <text x="1080" y="390" fill="#6D28D9" font-size="20" font-family="Segoe UI, Arial, sans-serif">skills / MCP</text>

  <path d="M390 320H418" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
  <path d="M750 320H778" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
  <path d="M1024 320H1050" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>

  <rect x="214" y="470" width="972" height="132" rx="26" fill="#FEF3C7"/>
  <text x="252" y="516" fill="#92400E" font-size="32" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Multi-step Tool Loop</text>
  <text x="252" y="550" fill="#A16207" font-size="21" font-family="Segoe UI, Arial, sans-serif">model call -> tool_use -> execute -> tool_result -> repeat (max iterations configurable)</text>
  <text x="252" y="582" fill="#A16207" font-size="21" font-family="Segoe UI, Arial, sans-serif">on end_turn: persist session, emit final response, update usage metrics</text>

  <path d="M1146 426V466" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
  <path d="M588 426V466" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>

  <rect x="138" y="634" width="366" height="166" rx="24" fill="#E0F2FE"/>
  <text x="170" y="678" fill="#0C4A6E" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Memory Stack</text>
  <text x="170" y="714" fill="#075985" font-size="20" font-family="Segoe UI, Arial, sans-serif">AGENTS.md (global + per chat)</text>
  <text x="170" y="744" fill="#075985" font-size="20" font-family="Segoe UI, Arial, sans-serif">structured SQLite memories</text>
  <text x="170" y="774" fill="#075985" font-size="20" font-family="Segoe UI, Arial, sans-serif">reflector + quality + observability</text>

  <rect x="526" y="634" width="366" height="166" rx="24" fill="#ECFCCB"/>
  <text x="558" y="678" fill="#365314" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Scheduler</text>
  <text x="558" y="714" fill="#4D7C0F" font-size="20" font-family="Segoe UI, Arial, sans-serif">cron + one-time tasks</text>
  <text x="558" y="744" fill="#4D7C0F" font-size="20" font-family="Segoe UI, Arial, sans-serif">background task runner</text>
  <text x="558" y="774" fill="#4D7C0F" font-size="20" font-family="Segoe UI, Arial, sans-serif">reflector loop + task history</text>

  <rect x="914" y="634" width="350" height="166" rx="24" fill="#F3E8FF"/>
  <text x="946" y="678" fill="#6B21A8" font-size="31" font-weight="700" font-family="Segoe UI, Arial, sans-serif">Web + Observability</text>
  <text x="946" y="714" fill="#7E22CE" font-size="20" font-family="Segoe UI, Arial, sans-serif">chat stream + sessions API</text>
  <text x="946" y="744" fill="#7E22CE" font-size="20" font-family="Segoe UI, Arial, sans-serif">usage + memory observability</text>
  <text x="946" y="774" fill="#7E22CE" font-size="20" font-family="Segoe UI, Arial, sans-serif">config + history endpoints</text>

  <path d="M380 602V632" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
  <path d="M710 602V632" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
  <path d="M1088 602V632" stroke="#0F172A" stroke-width="2.8" marker-end="url(#arrow)"/>
</svg>
